# Basic configurations
set-option -g default-shell /bin/zsh
set-window-option -g mode-keys vi

## Force 256 color
set -g default-terminal "screen-256color"

## Force VIM style
set-option -g status-keys vi
set-option -g mode-keys vi
#use hjkl for moving
#and HJKL for resizing
setw -g mode-keys vi
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

# Add ability to scroll in window
## Enable scrolling
setw -g mode-mouse on
set -g mouse-select-pane on
set -g mouse-resize-pane on
set -g mouse-select-window on

##########################################
# List of plugins
# To install the plugins from command line
## ~/.tmux/plugins/tpm/scripts/install_plugins.sh
# Supports `github_username/repo` or full git repo URLs
set -g @tpm_plugins "              \
  tmux-plugins/tpm                 \
  tmux-plugins/tmux-sensible       \
  tmux-plugins/tmux-cpu            \
  tmux-plugins/tmux-sidebar        \
  tmux-plugins/tmux-logging        \
  tmux-plugins/tmux-battery        \
  stonevil/tmux-vm-status          \
  stonevil/tmux-lan-status         \
  stonevil/tmux-wan-status         \
"
# Other examples:
# github_username/plugin_name    \
# git@github.com/user/plugin     \
# git@bitbucket.com/user/plugin  \

##########################################
## Configure tmux plugins

# tmux-plugins/tmux-sidebar
# prefix + Tab - toggle sidebar with a directory tree
# prefix + Backspace - toggle sidebar and move cursor to it (focus it)

set -g window-status-format "#[fg=colour16,bg=colour234] #I #[fg=colour231,bold]#W #[fg=colour31,bg=colour234,nobold]"
set -g window-status-current-format "#[fg=colour117,bg=colour31] #I #[fg=colour231,bold]#W #[fg=colour31,bg=colour234,nobold]"
# tmux-plugins/tmux-online-status
set -g status-left "CPU: #{cpu_icon} #{cpu_percentage} #{wan_status} #{lan_status}" 
# tmux-plugins/tmux-battery
set -g status-right "Battery: #{battery_icon} #{battery_percentage} | #{vm_status} | %a %h-%d %H:%M "

# stonevil/tmux-lan-staus
set -g @online_lan_icon "ok"
set -g @offline_lan_icon "crap!"

# stonevil/tmux-wan-staus
set -g @online_wan_icon "ok"
set -g @offline_wan_icon "crap!"

# stonevil/tmux-wan-staus
set -g @vm_icon "Virtual Machines"

# remap prefix to Control + s
set -g prefix C-s
unbind C-b
bind C-s send-prefix

# force a reload of the config file
unbind r
bind r source-file ~/.tmux.conf

# quick pane cycling
unbind ^A
bind ^A select-pane -t :.+

# Run plugin manager
run-shell '~/.tmux/plugins/tpm/tpm'

### COPY and PASTE

## Enable pbcopy and pbpaste on OS X
## Install reattach-to-user-namespace from brew or macport. https://github.com/ChrisJohnsen/tmux-MacOSX-pasteboard
bind C-c run "tmux save-buffer - | reattach-to-user-namespace pbcopy"
bind C-v run "tmux set-buffer $(reattach-to-user-namespace pbpaste); tmux paste-buffer"
